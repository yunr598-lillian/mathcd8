<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seoul-to-Spoon Delivery Strategy Cost Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f9ff;
            color: #333;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 128, 0.08);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px 30px;
            border-bottom: 1px solid #e1e8ff;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
        }
        
        .chart-container {
            flex: 1 1 700px;
            min-width: 300px;
            padding: 20px;
        }
        
        .data-container {
            flex: 1 1 400px;
            min-width: 300px;
            padding: 20px;
            background-color: #f9fbff;
            border-radius: 10px;
            margin-left: 10px;
        }
        
        .chart-wrapper {
            position: relative;
            height: 500px;
            width: 100%;
            margin-top: 10px;
        }
        
        h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e8ff;
        }
        
        h3 {
            color: #2a5298;
            margin: 20px 0 15px 0;
        }
        
        .cost-equation {
            background-color: #eef3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4a6fcc;
        }
        
        .cost-equation p {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            color: #1e3c72;
        }
        
        .calculation {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #dce5ff;
        }
        
        .strategy-box {
            display: flex;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .strategy-1 {
            flex: 1;
            background-color: rgba(74, 111, 204, 0.1);
            padding: 15px;
            border-left: 5px solid #4a6fcc;
        }
        
        .strategy-2 {
            flex: 1;
            background-color: rgba(220, 53, 69, 0.08);
            padding: 15px;
            border-left: 5px solid #dc3545;
            margin-left: 15px;
        }
        
        .strategy-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #1e3c72;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .key-takeaway {
            background-color: #e7f3ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
            border-left: 5px solid #1e3c72;
        }
        
        .slider-container {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .slider-value {
            font-weight: bold;
            color: #1e3c72;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #dde4f0;
            outline: none;
        }
        
        .comparison-result {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            text-align: center;
        }
        
        .comparison-item {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            margin: 0 5px;
        }
        
        .cheaper {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .cost-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        @media (max-width: 1100px) {
            .content {
                flex-direction: column;
            }
            
            .data-container {
                margin-left: 0;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Seoul-to-Spoon Delivery Strategy Cost Analysis</h1>
            <p class="subtitle">Cost Model and Graphical Analysis for New Factory Delivery Strategies</p>
        </header>
        
        <div class="content">
            <div class="chart-container">
                <h2>Delivery Strategy Cost Comparison Chart</h2>
                <p>Comparison of daily delivery costs (₩) for two delivery strategies at different delivery volumes</p>
                <div class="chart-wrapper">
                    <canvas id="costChart"></canvas>
                </div>
                
                <div class="slider-container">
                    <div class="slider-label">
                        <span>Kits to Deliver: <span id="kitValue">1200</span> kits</span>
                        <span class="slider-value">Cost Comparison: 
                            <span id="strategy1Cost">₩2,400,000</span> vs 
                            <span id="strategy2Cost">₩2,520,000</span>
                        </span>
                    </div>
                    <input type="range" id="kitSlider" min="0" max="1500" value="1200" class="slider">
                </div>
                
                <div class="comparison-result">
                    <div class="comparison-item cheaper" id="strategy1Result">
                        <div>Strategy 1 (Own Vans)</div>
                        <div class="cost-value">₩2,400,000</div>
                        <div>For 1200 kits</div>
                    </div>
                    <div class="comparison-item" id="strategy2Result">
                        <div>Strategy 2 (3rd Party)</div>
                        <div class="cost-value">₩2,520,000</div>
                        <div>For 1200 kits</div>
                    </div>
                </div>
            </div>
            
            <div class="data-container">
                <h2>Cost Model and Calculations</h2>
                
                <h3>Strategy 1: Own Van Fleet</h3>
                <div class="cost-equation">
                    <p><strong>Daily Delivery Cost Equation:</strong> Dst1 = 80,000 × v</p>
                    <p>Where v = number of vans</p>
                </div>
                
                <div class="calculation">
                    <p><strong>Calculating vans needed for 1,200 kits:</strong></p>
                    <p>Each van can carry maximum 40 kits</p>
                    <p>Vans required v = 1,200 ÷ 40 = <span class="highlight">30 vans</span></p>
                    <p><strong>Daily Cost:</strong> Dst1 = 80,000 × 30 = <span class="highlight">₩2,400,000</span></p>
                </div>
                
                <h3>Strategy 2: Third-Party Logistics</h3>
                <div class="cost-equation">
                    <p><strong>Daily Delivery Cost Equation:</strong> Dst2 = 2,100 × n</p>
                    <p>Where n = number of kits delivered</p>
                </div>
                
                <div class="calculation">
                    <p><strong>Calculating daily cost for 1,200 kits:</strong></p>
                    <p>Dst2 = 2,100 × 1,200 = <span class="highlight">₩2,520,000</span></p>
                    <p>Note: Third-party logistics guarantees at least 100 kits per day</p>
                </div>
                
                <h3>Strategy Comparison</h3>
                <div class="strategy-box">
                    <div class="strategy-1">
                        <div class="strategy-title">Strategy 1: Own Van Fleet</div>
                        <p>• Cost per van per day: ₩80,000</p>
                        <p>• Maximum capacity per van: 40 kits</p>
                        <p>• No minimum delivery requirement</p>
                    </div>
                    <div class="strategy-2">
                        <div class="strategy-title">Strategy 2: 3rd Party Logistics</div>
                        <p>• Cost per kit delivered: ₩2,100</p>
                        <p>• Minimum daily delivery: 100 kits</p>
                        <p>• Cost is proportional to delivery volume</p>
                    </div>
                </div>
                
                <h3>Key Cost Points Data Table</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Kits Delivered</th>
                            <th>Strategy 1 Cost (₩)</th>
                            <th>Strategy 2 Cost (₩)</th>
                            <th>Better Strategy</th>
                        </tr>
                    </thead>
                    <tbody id="dataTable">
                        <!-- Table data will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <div class="key-takeaway">
                    <h3>Key Insights</h3>
                    <p>• Strategy 1 cost is a <strong>step function</strong> with jumps of ₩80,000 per additional van.</p>
                    <p>• Strategy 2 cost is a <strong>linear function</strong> proportional to the number of kits.</p>
                    <p>• For delivery volumes below <strong>approximately 1,143 kits</strong>, Strategy 2 is more economical.</p>
                    <p>• For delivery volumes above <strong>approximately 1,143 kits</strong>, Strategy 1 is more economical.</p>
                    <p>• For 1,200 kits, Strategy 1 saves <strong>₩120,000 per day</strong> compared to Strategy 2.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get Canvas element
        const ctx = document.getElementById('costChart').getContext('2d');
        
        // Generate step function data for Strategy 1
        const generateStepData = () => {
            const data = [];
            for (let n = 0; n <= 1500; n++) {
                // Strategy 1: Each van can carry max 40 kits, cost ₩80,000 per van
                const v = Math.ceil(n / 40);
                const cost = n === 0 ? 0 : v * 80000;
                data.push({x: n, y: cost});
            }
            return data;
        };
        
        // Generate linear function data for Strategy 2
        const generateLinearData = () => {
            const data = [];
            for (let n = 0; n <= 1500; n++) {
                // Strategy 2: ₩2,100 per kit, minimum 100 kits
                const cost = n < 100 ? 2100 * 100 : 2100 * n;
                data.push({x: n, y: cost});
            }
            return data;
        };
        
        // Create the chart
        const costChart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [
                    {
                        label: 'Strategy 1: Own Van Fleet (Step Function)',
                        data: generateStepData(),
                        borderColor: '#4a6fcc',
                        backgroundColor: 'rgba(74, 111, 204, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0,
                        stepped: true,
                        pointRadius: 0
                    },
                    {
                        label: 'Strategy 2: Third-Party Logistics (Linear Function)',
                        data: generateLinearData(),
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0,
                        pointRadius: 0
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Number of Kits Delivered',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        max: 1500,
                        ticks: {
                            stepSize: 100
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Daily Delivery Cost (₩)',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        ticks: {
                            callback: function(value) {
                                if (value >= 1000000) {
                                    return '₩' + (value / 1000000).toFixed(1) + 'M';
                                } else if (value >= 1000) {
                                    return '₩' + (value / 1000).toFixed(0) + 'K';
                                }
                                return '₩' + value;
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += '₩' + context.parsed.y.toLocaleString();
                                return label;
                            }
                        }
                    },
                    legend: {
                        position: 'top',
                        labels: {
                            font: {
                                size: 14
                            },
                            padding: 20
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        });
        
        // Update table data
        const updateDataTable = () => {
            const tableBody = document.getElementById('dataTable');
            tableBody.innerHTML = '';
            
            // Define key delivery volume points to display
            const keyPoints = [0, 100, 200, 400, 600, 800, 1000, 1143, 1200, 1400, 1500];
            
            keyPoints.forEach(kits => {
                // Calculate Strategy 1 cost
                const v = kits === 0 ? 0 : Math.ceil(kits / 40);
                const cost1 = kits === 0 ? 0 : v * 80000;
                
                // Calculate Strategy 2 cost
                const cost2 = kits < 100 ? 2100 * 100 : 2100 * kits;
                
                // Determine which strategy is better
                let betterStrategy = cost1 === cost2 ? "Same Cost" : 
                                    cost1 < cost2 ? "Strategy 1" : "Strategy 2";
                
                // Create table row
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${kits.toLocaleString()}</td>
                    <td>${cost1 === 0 ? '₩0' : '₩' + cost1.toLocaleString()}</td>
                    <td>${kits === 0 ? '₩210,000*' : '₩' + cost2.toLocaleString()}</td>
                    <td>${betterStrategy}</td>
                `;
                
                tableBody.appendChild(row);
            });
        };
        
        // Initialize table
        updateDataTable();
        
        // Slider event listener
        const kitSlider = document.getElementById('kitSlider');
        const kitValue = document.getElementById('kitValue');
        const strategy1Cost = document.getElementById('strategy1Cost');
        const strategy2Cost = document.getElementById('strategy2Cost');
        const strategy1Result = document.getElementById('strategy1Result');
        const strategy2Result = document.getElementById('strategy2Result');
        
        const updateCosts = () => {
            const kits = parseInt(kitSlider.value);
            kitValue.textContent = kits.toLocaleString();
            
            // Calculate Strategy 1 cost
            const v = kits === 0 ? 0 : Math.ceil(kits / 40);
            const cost1 = kits === 0 ? 0 : v * 80000;
            
            // Calculate Strategy 2 cost
            const cost2 = kits < 100 ? 2100 * 100 : 2100 * kits;
            
            // Update display
            strategy1Cost.textContent = '₩' + cost1.toLocaleString();
            strategy2Cost.textContent = '₩' + cost2.toLocaleString();
            
            // Update comparison result
            strategy1Result.querySelector('.cost-value').textContent = '₩' + cost1.toLocaleString();
            strategy1Result.querySelector('div:first-child + div + div').textContent = `For ${kits} kits`;
            
            strategy2Result.querySelector('.cost-value').textContent = '₩' + cost2.toLocaleString();
            strategy2Result.querySelector('div:first-child + div + div').textContent = `For ${kits} kits`;
            
            // Highlight cheaper option
            if (cost1 < cost2) {
                strategy1Result.classList.add('cheaper');
                strategy2Result.classList.remove('cheaper');
            } else if (cost2 < cost1) {
                strategy2Result.classList.add('cheaper');
                strategy1Result.classList.remove('cheaper');
            } else {
                strategy1Result.classList.add('cheaper');
                strategy2Result.classList.add('cheaper');
            }
            
            // Update vertical line in chart
            updateVerticalLine(kits);
        };
        
        // Add vertical reference line
        let verticalLine = null;
        
        const updateVerticalLine = (kits) => {
            // Remove existing vertical line
            if (verticalLine) {
                costChart.data.datasets = costChart.data.datasets.filter(dataset => dataset.label !== 'Current Delivery Volume');
            }
            
            // Add new vertical line
            const verticalLineData = [];
            for (let i = 0; i <= 3000000; i += 500000) {
                verticalLineData.push({x: kits, y: i});
            }
            
            verticalLine = {
                label: 'Current Delivery Volume',
                data: verticalLineData,
                borderColor: '#28a745',
                borderWidth: 2,
                borderDash: [5, 5],
                fill: false,
                pointRadius: 0,
                tension: 0
            };
            
            costChart.data.datasets.push(verticalLine);
            costChart.update();
        };
        
        // Initialize cost display
        updateCosts();
        
        // Listen for slider changes
        kitSlider.addEventListener('input', updateCosts);
        
        // Add chart click interaction
        costChart.canvas.addEventListener('click', function(event) {
            const points = costChart.getElementsAtEventForMode(event, 'nearest', { intersect: false }, true);
            if (points.length) {
                const firstPoint = points[0];
                const xValue = costChart.data.datasets[firstPoint.datasetIndex].data[firstPoint.index].x;
                kitSlider.value = xValue;
                updateCosts();
            }
        });
    </script>
</body>
</html>